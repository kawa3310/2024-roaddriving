import{a as g}from"./axios-G2rPRu76.js";import{_ as D,L as P,r as p,o as n,c as i,b as m,w as x,a as t,F as u,v as b,d as L,u as o}from"./index-HzIZupPH.js";import{S as h}from"./sweetalert2.esm.all-HDkAWA8Y.js";import{L as E}from"./LoadingSvg-SoWaFLri.js";import{P as M}from"./PaginationModal-z2MxqBq5.js";var U={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"rei",BASE_URL:"/2024-roaddriving/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:f,VITE_PATH:S}=U,V={data(){return{prodModal:null,catchData:[],products:[],teacherData:[],teacherAreaData:"",pagination:{},pages:{},isloading:!1,emitProduct:{}}},methods:{getData(l=1){this.isloading=!0,g.get(`${f}/api/${S}/admin/products?page=${l}`).then(s=>{this.catchData=s.data.products,this.pages=s.data.pagination,this.isloading=!1,this.filterData(this.catchData)}).catch(s=>{this.isloading=!1,h.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:s.response.data.message})})},filterData(l){const s=[],e=[];l.forEach(r=>{r.category==="地區"?(s.push(r),this.teacherData=s):r.category==="課程"&&(e.push(r),this.products=e)})},uploadPhotos(){const l=this.fileInput.files[0],s=new FormData;s.append("file-to-upload",l),g.post(`${f}/api/admin/upload`,s).then(e=>{this.emitProduct.imageUrl=e.data.imageUrl}).catch(e=>{h.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:e.response.data.message})})}},mounted(){this.getData()},components:{PaginationModal:M,Loading:P,LoadingSvg:E}},k={class:"container px-6"},C={class:"mt-9"},T={class:"admin-table"},I={class:"table mt-4 table-bordered"},B={class:"d-flex justify-content-center pt-1"},O=["src"],A={class:"mt-9"},R={class:"admin-table"},F={class:"table mt-4 table-bordered"},N=["src"],H={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},j={class:"modal-dialog modal-xl"},z={class:"modal-content border-0"},q={class:"modal-body"},G={class:"row"},J={class:"col-3"},K={class:"mb-3"},Q=["src","alt"];function W(l,s,e,r,d,c){const v=p("LoadingSvg"),_=p("Loading"),y=p("PaginationModal");return n(),i(u,null,[m(_,{active:d.isloading,"z-index":1060},{default:x(()=>[m(v)]),_:1},8,["active"]),t("div",k,[t("div",C,[s[4]||(s[4]=t("h4",{class:"mb-9"},"課程方案",-1)),t("button",{type:"button",class:"btn fs-4 plus",onClick:s[0]||(s[0]=(...a)=>l.modelOpen&&l.modelOpen(...a)),"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},s[3]||(s[3]=[t("i",{class:"bi bi-plus-circle"},null,-1)]))]),t("div",T,[t("table",I,[s[6]||(s[6]=t("thead",null,[t("tr",{class:"tr"},[t("th",{width:"5"}," 方案 "),t("th",{width:"5"},"堂數"),t("th",{width:"5"}," 1堂 "),t("th",{width:"5"}," 價格 "),t("th",{width:"5"}," 標語 "),t("th",{width:"60"}," 內容 "),t("th",{width:"5"},"推薦指數"),t("th",{width:"5"},"圖片"),t("th",{width:"5"}," 編輯 ")])],-1)),t("tbody",null,[(n(!0),i(u,null,b(d.products,a=>(n(),i("tr",{key:a.id,class:"tr"},[t("td",null,o(a.title),1),t("td",null,o(a.lesson),1),t("td",null,o(a.unit),1),t("td",null,o(a.price),1),t("td",null,o(a.description),1),t("td",null,o(a.content),1),t("td",null,[t("div",B,[(n(!0),i(u,null,b(a.stars,w=>(n(),i("i",{key:w,class:"bi bi-star-fill"}))),128))])]),t("td",null,[t("img",{src:a.imageUrl,alt:"img"},null,8,O)]),s[5]||(s[5]=t("td",null,[t("div",{class:"btn-group"},[t("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 編輯 "),t("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ")])],-1))]))),128))])])]),t("div",A,[s[8]||(s[8]=t("h4",{class:"mb-9"},"師資",-1)),t("button",{type:"button",class:"btn fs-4 plus",onClick:s[1]||(s[1]=(...a)=>l.modelOpen&&l.modelOpen(...a))},s[7]||(s[7]=[t("i",{class:"bi bi-plus-circle"},null,-1)]))]),t("div",R,[t("table",F,[s[10]||(s[10]=t("thead",null,[t("tr",{class:"tr"},[t("th",{width:"70"}," 教練名單 "),t("th",{width:"10"},"地區"),t("th",{width:"10"},"照片"),t("th",{width:"10"}," 編輯 ")])],-1)),t("tbody",null,[(n(!0),i(u,null,b(d.teacherData,a=>(n(),i("tr",{key:a.id,class:"tr"},[t("td",null,o(a.title),1),t("td",null,o(a.area),1),t("td",null,[t("img",{src:a.imageUrl,alt:"teacherImg"},null,8,N)]),s[9]||(s[9]=t("td",null,[t("div",{class:"btn-group"},[t("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 編輯 "),t("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ")])],-1))]))),128))])]),m(y,{pages:d.pages,onEmitPages:c.getData},null,8,["pages","onEmitPages"])])]),t("div",H,[t("div",j,[t("div",z,[s[13]||(s[13]=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"productModalLabel",class:"modal-title"},[t("span",null,"新增產品"),t("span",null,"編輯產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",q,[t("div",G,[t("div",J,[s[12]||(s[12]=t("div",{class:"mb-3"},[t("label",{for:"imageUrl",class:"form-label"},"主要圖片"),t("input",{id:"imageUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結"})],-1)),t("div",K,[s[11]||(s[11]=t("label",{for:"file",class:"form-label"},[L("上傳圖片 "),t("i",{class:"fas fa-spinner fa-spin"})],-1)),t("input",{type:"file",class:"form-control mb-4",id:"file",ref:"fileInput",onChange:s[2]||(s[2]=(...a)=>c.uploadPhotos&&c.uploadPhotos(...a))},null,544)])]),t("img",{class:"img-fluid",src:d.emitProduct.imageUrl,alt:d.emitProduct.imageUrl},null,8,Q)])]),s[14]||(s[14]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 "),t("button",{type:"button",class:"btn btn-primary"}," 確認 ")],-1))])])])],64)}const st=D(V,[["render",W]]);export{st as default};
