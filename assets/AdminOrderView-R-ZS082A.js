import{a as r}from"./axios-G2rPRu76.js";import{S as o}from"./sweetalert2.esm.all-HDkAWA8Y.js";/* empty css              */import{L as g}from"./index-aNMuTKla.js";import{_,c as l,b as v,a as t,F as c,v as h,s as w,d as y,r as x,o as n,u as d,x as C,D as $}from"./index-LKP3tIZV.js";var k={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"rei",BASE_URL:"/2024-roaddriving/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_PATH:m}=k,V={data(){return{orderData:{},isloading:!1,isNew:!1}},methods:{getOrders(){this.isloading=!0,r.get(`${u}/api/${m}/admin/orders`).then(i=>{this.orderData=i.data.orders,this.isloading=!1}).catch(i=>{this.isloading=!1,o.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:i.response.data.message})})},addOrderStates(i){this.isloading=!0;const s={is_paid:i.is_paid};r.put(`${u}/api/${m}/admin/order/${i.id}`,{data:s}).then(()=>{this.isNew=!1,this.isloading=!1,this.$refs.orderModal.modalClose(),this.getOrders(),o.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"success",title:"編輯成功"})}).catch(()=>{this.isloading=!1,o.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:"編輯失敗"})})},delOrder(i){this.isNew=!0,this.isloading=!0,r.delete(`${u}/api/${m}/admin/order/${i.id}`).then(()=>{this.isNew=!1,this.isloading=!1,this.getOrders(),o.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"success",title:"刪除成功"})}).catch(s=>{this.isloading=!1,o.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:s.response.data.message})})}},mounted(){this.getOrders()},components:{Loading:g}},O={class:"container px-6"},S={class:"admin-table"},B={class:"table mt-4 table-bordered"},D={class:"form-check form-switch"},L=["onUpdate:modelValue","id","onChange"],E=["for"],N={class:"btn-group"},M=["onClick"],T={class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModal","aria-hidden":"true"},U={class:"modal-dialog modal-xl"},I={class:"modal-content border-0"},P={class:"modal-body"},R={class:"row"},A={class:"col-3"},F={class:"mb-3"};function H(i,s,z,j,p,f){const b=x("Loading");return n(),l(c,null,[v(b,{active:p.isloading,"z-index":1060},null,8,["active"]),t("div",O,[s[9]||(s[9]=t("div",{class:"mt-9"},[t("h4",{class:"mb-9"},"已預約")],-1)),t("div",S,[t("table",B,[s[3]||(s[3]=t("thead",null,[t("tr",{class:"tr"},[t("th",{width:""}," 預約編號 "),t("th",{width:""},"預約人資料"),t("th",{width:""}," 預約課程 "),t("th",{width:""}," 預約狀態 "),t("th",{width:""}," 訂單詳細 "),t("th",{width:"100"}," 訂單狀態 ")])],-1)),t("tbody",null,[(n(!0),l(c,null,h(p.orderData,e=>(n(),l("tr",{key:e.id,class:"tr"},[t("td",null,d(e.id),1),t("td",null,d(e.user.name),1),t("td",null,[(n(!0),l(c,null,h(e.products,a=>(n(),l("ul",{key:a.id},[t("li",null,d(a.product.title),1)]))),128))]),t("td",null,[t("div",D,[C(t("input",{class:"form-check-input","onUpdate:modelValue":a=>e.is_paid=a,type:"checkbox",role:"switch",id:`paidSwitch${e.id}`,onChange:a=>f.addOrderStates(e)},null,40,L),[[$,e.is_paid]]),t("label",{class:"form-check-label",for:`paidSwitch${e.id}`},d(e.is_paid?"已完課":"未完課"),9,E)])]),s[2]||(s[2]=t("td",null,[t("a",{href:"#"},"看詳細")],-1)),t("td",null,[t("div",N,[s[1]||(s[1]=t("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#orderModal"}," 編輯 ",-1)),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>f.delOrder(e)}," 刪除 ",8,M)])])]))),128))])]),s[8]||(s[8]=w('<nav class="py-5 d-flex flex-column align-items-center" aria-label="..."><ul class="pagination pagination-sm"><li class="page-item active" aria-current="page"><a href="#" class="d-flex align-items-center">1 <i class="bi bi-caret-right-fill ms-3"></i></a></li></ul></nav>',1)),t("div",T,[t("div",U,[t("div",I,[s[6]||(s[6]=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"productModalLabel",class:"modal-title"},[t("span",null,"新增產品"),t("span",null,"編輯產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",P,[t("div",R,[t("div",A,[s[5]||(s[5]=t("div",{class:"mb-3"},[t("label",{for:"imageUrl",class:"form-label"},"主要圖片"),t("input",{id:"imageUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結"})],-1)),t("div",F,[s[4]||(s[4]=t("label",{for:"file",class:"form-label"},[y("上傳圖片 "),t("i",{class:"fas fa-spinner fa-spin"})],-1)),t("input",{type:"file",class:"form-control mb-4",id:"file",ref:"fileInput",onChange:s[0]||(s[0]=(...e)=>i.uploadPhotos&&i.uploadPhotos(...e))},null,544)])])])]),s[7]||(s[7]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 "),t("button",{type:"button",class:"btn btn-primary"}," 確認 ")],-1))])])])])])],64)}const W=_(V,[["render",H]]);export{W as default};
